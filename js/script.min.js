const CITY_CLUBS_DATA=[{id:"1111",morningID:"12222",subscriptionID:"13333",address:"пр. Большой В.О., д. 68А",addressForm:"пр. Большой В.О., д. 68А",name:"Васильевский"},{id:"407264",morningID:"404241",subscriptionID:"409890",address:"Московское ш., 4, корп. 4",addressForm:"Московское ш. 4, корп. 4 (IT-парк «Монте Роза»)",name:"Монте Роза"},{id:"407263",morningID:"404242",subscriptionID:"409889",address:"Красноармейская ул., 131",addressForm:"ул. Красноармейская, д. 131 (ТРЦ «Гудок»)",name:"Гудок"},{id:"407265",morningID:"404244",subscriptionID:"409892",address:"Южное ш., 5",addressForm:"Южное шоссе д. 5 (ТК «Амбар»)",name:"Амбар"},{id:"409888",morningID:"",subscriptionID:"409891",address:"Ул. Стара Загора, 58",addressForm:"ул. Стара Загора д. 58 (Шипка)",name:"Шипка"}],SUBSCRIPTION_NAME="Первоначальный взнос",SUBSCRIPTION_PRICE=1500;
const checkResponse=e=>e.ok?e.json():Promise.reject("Ошибка "+e.status),checkSuccess=e=>e&&e.success?e:Promise.reject("Ответ не success: "+e),generalRequest=(e,s)=>{e="localhost"===window.location.hostname?"http://127.0.0.1:8000/payments/"+e+"/":window.location.origin+"/payments/"+e+"/";return fetch(e,s).then(checkResponse)};
const menu=document.querySelector(".menu"),menuBtn=menu.querySelector("#menu-button span"),menuList=menu.querySelector("#menu-list");function toggleNavCity(){menuList.classList.toggle("hidden")}window.location.pathname.includes("spb")?menuBtn.innerText="Санкт-Петербург":menuBtn.innerText="Самара",window.onscroll=function(){onHeaderSticky()};const header=document.querySelector("header"),sticky=header.offsetTop;function onHeaderSticky(){window.pageYOffset>sticky?header.classList.add("active"):header.classList.remove("active")}
const OPTIONS={promo:{loop:!0,freeMode:!0,effect:"fade",autoHeight:!0,pagination:{el:".swiper-pagination"},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},gallery:{loop:!0,freeMode:!0,breakpoints:{320:{slidesPerView:1.2,spaceBetween:10},640:{slidesPerView:2},768:{slidesPerView:2.5,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},scrollbar:{el:".swiper-scrollbar"}},services:{spaceBetween:10,breakpoints:{320:{slidesPerView:1.3,freeMode:!0,spaceBetween:10},640:{slidesPerView:1.75},768:{slidesPerView:2,spaceBetween:20},960:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:30}}},tariffs:{breakpoints:{320:{slidesPerView:1.3,freeMode:!0,spaceBetween:10},640:{slidesPerView:2},768:{slidesPerView:2,spaceBetween:20},960:{slidesPerView:2.7,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:20}}}},carouselPromo=new Swiper("#carousel-promo",OPTIONS.promo),carouselClubsMain=new Swiper("#carousel-clubs-main",OPTIONS.gallery),carouselClubsPool=new Swiper("#carousel-clubs-pool",OPTIONS.gallery),carouselClubsGym=new Swiper("#carousel-clubs-gym",OPTIONS.gallery),carouselClubsSpa=new Swiper("#carousel-clubs-spa",OPTIONS.gallery),carouselClubsGroup=new Swiper("#carousel-clubs-group",OPTIONS.gallery),carouselClubsServices=new Swiper("#carousel-services",OPTIONS.services),carouselTariffs=new Swiper("#carousel-tariffs",OPTIONS.tariffs);
function toggleModal(e){var t=document.getElementById("modal-"+e),e=document.querySelector("#modal-"+e+" .form");t.classList.toggle("hidden"),t.classList.contains("hidden")&&e.reset()}
!function(){function s(e,t){return t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]}let l=document.querySelector("#days"),c=document.querySelector("#label-days"),u=document.querySelector("#label-hours"),a=document.querySelector("#label-minutes"),y=document.querySelector("#label-seconds"),f=document.querySelector("#hours"),d=document.querySelector("#minutes"),m=document.querySelector("#seconds"),h=document.querySelector("#dd"),q=document.querySelector("#hh"),S=document.querySelector("#mm"),x=document.querySelector("#ss"),C=(s(l,["день","дня","дней"]),s(f,["час","часа","часов"]),s(d,["минута","минуты","минут"]),s(m,["секунда","секунды","секунд"]),window.location.pathname,new Date("October 24, 2023 00:00:00").getTime()),i=setInterval(function(){var e=(new Date).getTime(),e=C-e,t=Math.floor(e/864e5),o=Math.floor(e%864e5/36e5),n=Math.floor(e%36e5/6e4),r=Math.floor(e%6e4/1e3);l.textContent=t,f.textContent=o,d.textContent=n,m.textContent=r,c.textContent=s(t,["день","дня","дней"]),u.textContent=s(o,["час","часа","часов"]),a.textContent=s(n,["минута","минуты","минут"]),y.textContent=s(r,["секунда","секунды","секунд"]),h.style.strokeDashoffset=440-440*t/365,q.style.strokeDashoffset=440-440*o/24,S.style.strokeDashoffset=440-440*n/60,x.style.strokeDashoffset=440-440*r/60,e<0&&(clearInterval(i),l.textContent=0,f.textContent=0,d.textContent=0,m.textContent=0,h.style.strokeDashoffset=440,q.style.strokeDashoffset=440,S.style.strokeDashoffset=440,x.style.strokeDashoffset=440,document.querySelector(".timer").style.display="none")},100)}();
const nowAgeUser=e=>{var t=new Date,t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),e=new Date(e),a=new Date(t.getFullYear(),e.getMonth(),e.getDate()),e=t.getFullYear()-e.getFullYear();return t<a&&--e,e},maxValueDate=()=>{var e=(new Date).toLocaleDateString(),t=e.slice(3,5),e=e.slice(0,2);return(new Date).getFullYear()-14+"-"+t+"-"+e};
const orderedCount=e=>Array.from(e.split("").reduce((e,t)=>(e.set(t,(e.get(t)||0)+1),e),new Map)),checkPhone=e=>{e=e.value.replace(/[^+\d]/g,"").slice(2);return 10===e.length&&orderedCount(e)[0][1]<10},elements=document.querySelectorAll('[type="tel"]'),maskOptions={mask:"+{7}(000)000-00-00",lazy:!1};elements.forEach(e=>new IMask(e,maskOptions));
const onlyInputWords=e=>{e.addEventListener("input",e=>{e.target.value=e.value.replace(/[^a-zа-яё\s]/gi,"")})};
let forms=document.querySelectorAll(".needs-validation");const onCheckValidateForm=a=>{var e=a.querySelectorAll('[type="text"]'),t=a.querySelector('[type="tel"]'),l=a.querySelector('[type="date"]'),s=checkPhone(t),l=14<=nowAgeUser(l.value);return e.forEach(e=>{e||(a.classList.add("was-validated"),e.parentElement.classList.add("is-invalid"))}),s&&l?(a.classList.remove("was-validated"),t.parentElement.classList.remove("is-invalid"),!0):(a.classList.add("was-validated"),s||t.parentElement.classList.add("is-invalid"),!1)};
const onSubmitForm=e=>{var t,e=new FormData(e.target),e={products:[{name:e.get("product_name"),price:e.get("product_price"),price_id:e.get("club_id")},{name:SUBSCRIPTION_NAME,price:SUBSCRIPTION_PRICE,price_id:(t=e.get("club_id"),[...CITY_CLUBS_DATA].filter(e=>e.morningID===t||e.id===t)[0].subscriptionID)}],customer:{first_name:e.get("firstName"),last_name:e.get("lastName"),middle_name:"",phone:e.get("phone").replace(/[^+\d]/g,"").slice(2),birth_day:e.get("birthDay"),email:e.get("email")},recurrentable:!0};console.log(e),JSON.stringify(e),(new Headers).append("Content-Type","application/json")};document.addEventListener("DOMContentLoaded",()=>{forms.forEach(t=>{t.querySelector('[type="date"]').setAttribute("max",maxValueDate()),t.addEventListener("submit",function(e){e.preventDefault(),console.log("kkk"),onCheckValidateForm(t)&&(t.querySelector('[type="submit"]').setAttribute("disabled",!0),onSubmitForm(e),t.reset())})})});